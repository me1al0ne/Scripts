local tpwalking = false
local speed = 50 -- The desired speed for movement
local chr = game.Players.LocalPlayer.Character
local hum = chr and chr:FindFirstChildWhichIsA("Humanoid")

-- Create a ScreenGui for mobile
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Button to toggle tpwalking
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 200, 0, 50)
toggleButton.Position = UDim2.new(0.5, -100, 0.9, -25)
toggleButton.Text = "Enable TP Walking"
toggleButton.Parent = screenGui

-- Function to start TP Walking
local function startTPWalking()
    tpwalking = true
    while tpwalking and chr and hum and hum.Parent do
        local delta = wait(0.03)  -- Adjust the rate at which movement updates (can be lower or higher)
        
        if hum.MoveDirection.Magnitude > 0 then
            -- Calculate the movement direction based on the humanoid's MoveDirection
            local moveDirection = hum.MoveDirection
            
            -- Update the character's CFrame based on the movement direction and speed
            local newCFrame = chr.HumanoidRootPart.CFrame + moveDirection * speed * delta
            chr.HumanoidRootPart.CFrame = newCFrame
        end
    end
end

-- Function to stop TP Walking
local function stopTPWalking()
    tpwalking = false
end

-- Toggle button function
toggleButton.MouseButton1Click:Connect(function()
    if tpwalking then
        stopTPWalking()
        toggleButton.Text = "Enable TP Walking"
    else
        startTPWalking()
        toggleButton.Text = "Disable TP Walking"
    end
end)
